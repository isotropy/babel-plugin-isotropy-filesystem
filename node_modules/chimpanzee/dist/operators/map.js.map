{"version":3,"sources":["../../src/operators/map.js"],"names":["map","schema","mapper","params","meta","type","fn","obj","key","parents","parentKeys","result","context","value"],"mappings":";;;;;QAMgBA,G,GAAAA,G;;AALhB;;AACA;;AACA;;;;AACA;;;;AAJA;AAMO,SAASA,GAAT,CAAaC,MAAb,EAAqBC,MAArB,EAA6BC,MAA7B,EAAqC;AAC1C,QAAMC,OAAO,EAAEC,MAAM,KAAR,EAAeJ,MAAf,EAAuBC,MAAvB,EAA+BC,MAA/B,EAAb;;AAEA,WAASG,EAAT,CAAYC,GAAZ,EAAiBC,GAAjB,EAAsBC,OAAtB,EAA+BC,UAA/B,EAA2C;AACzC,WAAO,mBAAW;AAChB,YAAMC,SAAS,qBAAMV,MAAN,EAAcM,GAAd,EAAmBC,GAAnB,EAAwBC,OAAxB,EAAiCC,UAAjC,EAA6CE,OAA7C,CAAf;AACA,aAAOD,mCACH,mBAAUT,OAAOS,OAAOE,KAAd,CAAV,EAAgC,EAAEN,GAAF,EAAOC,GAAP,EAAYC,OAAZ,EAAqBC,UAArB,EAAhC,EAAmEN,IAAnE,CADG,GAEHO,MAFJ;AAGD,KALD;AAMD;;AAED,SAAO,4BAAmBL,EAAnB,EAAuB,sBAAUH,MAAV,CAAvB,EAA0CC,IAA1C,CAAP;AACD","file":"map.js","sourcesContent":["/*       */\nimport { Match, Empty, Skip, Fault } from \"../results\";\nimport { FunctionSchema } from \"../schemas\";\nimport parse from \"../parse\";\nimport { getParams } from \"./utils\";\n\nexport function map(schema, mapper, params) {\n  const meta = { type: \"map\", schema, mapper, params };\n\n  function fn(obj, key, parents, parentKeys) {\n    return context => {\n      const result = parse(schema)(obj, key, parents, parentKeys)(context);\n      return result instanceof Match\n        ? new Match(mapper(result.value), { obj, key, parents, parentKeys }, meta)\n        : result;\n    };\n  }\n\n  return new FunctionSchema(fn, getParams(params), meta);\n}\n"]}