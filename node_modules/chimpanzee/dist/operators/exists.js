"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.exists = exists;

var _results = require("../results");

var _schemas = require("../schemas");

var _parse = require("../parse");

var _parse2 = _interopRequireDefault(_parse);

var _utils = require("./utils");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/*       */
function exists(predicate, schema) {
  const meta = { type: "exists", schema, predicate };

  predicate = predicate || function (x) {
    return typeof x !== "undefined";
  };

  function fn(obj, key, parents, parentKeys) {
    return function (context) {
      return predicate(obj) ? schema ? (0, _parse2.default)(schema)(obj, key, parents, parentKeys)(context) : new _results.Empty({ obj, key, parents, parentKeys }, meta) : new _results.Skip("Does not exist.", { obj, key, parents, parentKeys }, meta);
    };
  }

  return new _schemas.FunctionSchema(fn, (0, _utils.getParams)({}), meta);
}
//# sourceMappingURL=exists.js.map