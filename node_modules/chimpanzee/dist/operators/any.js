"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.any = any;

var _results = require("../results");

var _schemas = require("../schemas");

var _lazily = require("lazily");

var _parse = require("../parse");

var _parse2 = _interopRequireDefault(_parse);

var _utils = require("./utils");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function any(schemas, params) {
  const meta = { type: "any", schemas, params };

  function fn(obj, key, parents, parentKeys) {
    return function (context) {
      return function run(schemas, skippedSchemas, skippedResults) {
        const result = (0, _parse2.default)(schemas[0])(obj, key, parents, parentKeys)(context);
        return result instanceof _results.Match || result instanceof _results.Empty || result instanceof _results.Fault ? result : schemas.length > 1 ? run(schemas.slice(1), skippedSchemas.concat(schemas[0]), skippedResults.concat(result)) : new _results.Skip("None of the items matched.", {
          obj,
          key,
          parents,
          parentKeys,
          skippedSchemas: skippedSchemas.concat(schemas[0]),
          skippedResults: skippedResults.concat(result)
        }, meta);
      }(schemas, [], []);
    };
  }

  return new _schemas.FunctionSchema(fn, (0, _utils.getParams)(params), meta);
} /*       */
//# sourceMappingURL=any.js.map