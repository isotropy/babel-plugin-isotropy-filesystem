{"version":3,"sources":["../../src/operators/regex.js"],"names":["regex","params","meta","type","fn","obj","key","parents","parentKeys","result","RegExp","test","context","name"],"mappings":";;;;;QAOgBA,K,GAAAA,K;;AANhB;;AACA;;AACA;;AACA;;;;AACA;;;;AAEO,SAASA,KAAT,CAAeA,KAAf,EAAsBC,MAAtB,EAA8B;AACnC,QAAMC,OAAO,EAAEC,MAAM,OAAR,EAAiBH,KAAjB,EAAwBC,MAAxB,EAAb;;AAEA,WAASG,EAAT,CAAYC,GAAZ,EAAiBC,GAAjB,EAAsBC,OAAtB,EAA+BC,UAA/B,EAA2C;AACzC,WAAO,mBAAW;AAChB,YAAMC,SAAS,qBACb,wBACE;AAAA,eACE,OAAOT,KAAP,KAAiB,QAAjB,GACI,OAAOK,GAAP,KAAe,QAAf,IAA2B,IAAIK,MAAJ,CAAWV,KAAX,EAAkBW,IAAlB,CAAuBN,GAAvB,CAD/B,GAEI,OAAOA,GAAP,KAAe,QAAf,IAA2BL,MAAMW,IAAN,CAAWN,GAAX,CAHjC;AAAA,OADF,CADa,EAObA,GAPa,EAORC,GAPQ,EAOHC,OAPG,EAOMC,UAPN,EAOkBI,OAPlB,CAAf;AAQA,aAAOH,kCACH,kBAAU,sBAAV,EAAiC,EAAEJ,GAAF,EAAOC,GAAP,EAAYC,OAAZ,EAAqBC,UAArB,EAAjC,EAAoEN,IAApE,CADG,GAEHO,MAFJ;AAGD,KAZD;AAaD;AACD,SAAO,4BAAmBL,EAAnB,EAAuB,sBAAUH,MAAV,CAAvB,EAA0C,EAAEY,MAAM,OAAR,EAA1C,CAAP;AACD,C,CA1BD","file":"regex.js","sourcesContent":["/*       */\nimport { captureIf } from \"./capture\";\nimport { Match, Empty, Skip, Fault } from \"../results\";\nimport { FunctionSchema } from \"../schemas\";\nimport parse from \"../parse\";\nimport { getParams } from \"./utils\";\n\nexport function regex(regex, params) {\n  const meta = { type: \"regex\", regex, params };\n\n  function fn(obj, key, parents, parentKeys) {\n    return context => {\n      const result = parse(\n        captureIf(\n          obj =>\n            typeof regex === \"string\"\n              ? typeof obj === \"string\" && new RegExp(regex).test(obj)\n              : typeof obj === \"string\" && regex.test(obj)\n        )\n      )(obj, key, parents, parentKeys)(context);\n      return result instanceof Skip\n        ? new Skip(`Did not match regex.`, { obj, key, parents, parentKeys }, meta)\n        : result;\n    };\n  }\n  return new FunctionSchema(fn, getParams(params), { name: \"regex\" });\n}\n"]}